(window["webpackJsonpvk-app-poll"]=window["webpackJsonpvk-app-poll"]||[]).push([[0],{156:function(e,t,a){e.exports=a(250)},244:function(e,t,a){},250:function(e,t,a){"use strict";a.r(t);a(157),a(183),a(185),a(186),a(188),a(189),a(190),a(191),a(192),a(193),a(194),a(195),a(197),a(198),a(199),a(200),a(201),a(202),a(203),a(204),a(205),a(206),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225);var n=a(0),l=a.n(n),s=a(29),i=a.n(s),o=a(19),r=a.n(o),d=a(87),c=a(88),u=a(89),f=a(94),h=a(90),m=a(95),p=a(11),g=(a(237),a(96)),v=a(92),b=a.n(v),y=a(91),E=a.n(y),_=function(e){var t=e.id,a=(e.go,e.fetchedUser,Object(g.a)(e,["id","go","fetchedUser"]));return l.a.createElement(p.f,{id:t},l.a.createElement(p.g,null,"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e\u0442\u0435\u0440\u044f\u0448\u043a\u0443"),l.a.createElement(p.d,{title:"\u0414\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043e\u043f\u0440\u043e\u0441\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0444\u043e\u0440\u043c\u044b:"},l.a.createElement(p.b,null,l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(p.c,null,l.a.createElement(p.e,{top:"\u041a\u043e\u0433\u043e \u0438\u0449\u0435\u0448\u044c?",name:"field1",value:a.innquiryInfo.field1,onChange:a.\u0441hangeForms,type:"text",placeholder:"\u041a\u043e\u0433\u043e \u0438\u0449\u0435\u0448\u044c?"}),l.a.createElement(p.e,{top:"\u0412\u0440\u0435\u043c\u044f \u0432\u0441\u0442\u0440\u0435\u0447\u0438",name:"field2",value:a.innquiryInfo.field2,onChange:a.\u0441hangeForms,type:"text",placeholder:"\u0412\u0440\u0435\u043c\u044f \u0432\u0441\u0442\u0440\u0435\u0447\u0438"}),l.a.createElement(p.e,{top:"\u0413\u0434\u0435 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u043b\u0438\u0441\u044c",name:"field3",value:a.innquiryInfo.field3,onChange:a.\u0441hangeForms,type:"text",placeholder:"\u0413\u0434\u0435 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u043b\u0438\u0441\u044c"}),l.a.createElement(p.e,{top:"\u041f\u0440\u0438\u043c\u0435\u0442\u044b, \u043e\u0434\u0435\u0436\u0434\u0430",name:"field4",value:a.innquiryInfo.field4,onChange:a.\u0441hangeForms,type:"text",placeholder:"\u041f\u0440\u0438\u043c\u0435\u0442\u044b, \u043e\u0434\u0435\u0436\u0434\u0430"}),l.a.createElement(b.a,{top:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0444\u043e\u0442\u043e (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e):",onChange:a.\u0441hangeForms,name:"file",type:"file",placeholder:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0444\u043e\u0442\u043e",accept:"image/*"}))),a.innquiryInfo.isReady?l.a.createElement(p.b,null,"\u0418\u0449\u0443 ",a.innquiryInfo.field1,". ",a.innquiryInfo.field2," \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u043b\u0438\u0441\u044c ",a.innquiryInfo.field3,". ",a.innquiryInfo.field4,". ",a.innquiryInfo.male?"\u041f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u0430\u0441\u044c":"\u041f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u0441\u044f",", \u043e\u0442\u0437\u043e\u0432\u0438\u0441\u044c ",l.a.createElement("div",null,l.a.createElement("img",{className:"imgFormat",src:a.innquiryInfo.imageUrl||E.a,alt:"img"}))):l.a.createElement("div",null)),a.innquiryInfo.testTex1,a.innquiryInfo.isReady?l.a.createElement(p.a,{size:"xl",onClick:a.sendForms},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"):l.a.createElement(p.a,{size:"xl",disabled:!0,level:"2"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"))))},I=(a(244),a(61)),U=a.n(I),q=function(e){return l.a.createElement(p.f,{id:e.id},l.a.createElement(p.g,null,"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e\u0442\u0435\u0440\u044f\u0448\u043a\u0443"),l.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},l.a.createElement(U.a,{size:"large",style:{marginTop:20}})))},S=a(93),k=a.n(S),w=function(e){return l.a.createElement(p.f,{id:e.id},l.a.createElement(p.g,null,"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e\u0442\u0435\u0440\u044f\u0448\u043a\u0443"),l.a.createElement(k.a,null,l.a.createElement("h1",null,"\u0412\u0430\u0448 \u043e\u043f\u0440\u043e\u0441 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d!")))},F="8562720b7714ff2af73756a192b2b17d934eff7232f8e4110d614ba8277416eab25f57e933f84f7fa404b",P="186665203",A="photo-186665203_457239019",C=function(){r.a.send("VKWebAppCallAPIMethod",{method:"photos.getUploadServer",request_id:"photoUrl",params:{album_id:"269063524",group_id:P,v:"5.101",access_token:F}})},M=function(e,t,a){r.a.send("VKWebAppCallAPIMethod",{method:"photos.save",request_id:"photoSave",params:{album_id:"269063524",group_id:P,server:e,photos_list:t,hash:a,v:"5.101",access_token:F}})},x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e))).go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.createPoll=function(){var e=a.state.male?'["\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u044d\u0442\u043e \u044f","\u041f\u0438\u0448\u0438, \u044f \u0435\u0435 \u0437\u043d\u0430\u044e","\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"]':'["\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u044d\u0442\u043e \u044f","\u041f\u0438\u0448\u0438, \u044f \u0435\u0433\u043e \u0437\u043d\u0430\u044e","\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"]';r.a.send("VKWebAppCallAPIMethod",{method:"polls.create",request_id:"isCreatePoll",params:{question:"\u0425\u0435\u043b\u043f",is_anonymous:"0",is_multiple:"0",owner_id:"-".concat(P),add_answers:e,v:"5.101",access_token:F}})},a.createMessage=function(e,t,a){var n="".concat(a,", ").concat(t),l=Math.floor(1e9+Math.random()*(9e9+1-1e9)),s=+new Date,i=Math.round(s/1e3)+86400;r.a.send("VKWebAppCallAPIMethod",{method:"wall.post",request_id:"sendWall",params:{owner_id:"-".concat(P),from_group:"1",signed:"0",publish_date:+i,message:e,attachments:n,guid:l,v:"5.101",access_token:F}})},a.sendForms=function(){a.setState({activePanel:"spinner"}),null===a.state.img?a.createPoll():C()},a.\u0441hangeForms=function(e){switch(e.currentTarget.name){case"file":var t=e.currentTarget.files[0],n=new FileReader;n.onloadend=function(){a.setState({imageUrl:n.result})},t?(n.readAsDataURL(t),a.setState({imageUrl:n.result})):a.setState({imageUrl:""}),a.setState({img:e.currentTarget.files[0]});break;default:a.setState(Object(d.a)({},e.currentTarget.name,e.currentTarget.value))}},a.state={activePanel:"home",fetchedUser:null,field1:"",field2:"",field3:"",field4:"",img:null,imageUrl:null,isReady:!1,male:!0,imgForMessage:A,postSendId:0,poll:""},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;r.a.subscribe((function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data}),1===t.detail.data.sex&&e.setState({male:!1});break;case"VKWebAppCallAPIMethodResult":switch(t.detail.data.request_id){case"photoUrl":e.setState({imageUrl:t.detail.data.response.upload_url}),function(e,t){var a=new FormData;a.append("photo",t);fetch("https://cors-anywhere.herokuapp.com/"+e,{method:"POST",body:a,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(e){e&&M(e.server,e.photos_list,e.hash)})).catch((function(e){}))}(t.detail.data.response.upload_url,e.state.img);break;case"photoSave":e.setState({imgForMessage:"photo".concat(t.detail.data.response[0].owner_id,"_").concat(t.detail.data.response[0].id)}),e.createPoll();break;case"isCreatePoll":e.setState({poll:"poll".concat(t.detail.data.response.owner_id,"_").concat(t.detail.data.response.id)});var a="\u0418\u0449\u0443 ".concat(e.state.field1,". ").concat(e.state.field2," \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u043b\u0438\u0441\u044c ").concat(e.state.field3,". ").concat(e.state.field4,". \u041e\u0442\u0437\u043e\u0432\u0438\u0441\u044c \u0432 \u043e\u043f\u0440\u043e\u0441\u0435 \ud83d\udcac"),n=e.state.imgForMessage;e.createMessage(a,e.state.poll,n);break;case"sendWall":e.setState({postSendId:t.detail.data.response.post_id,field1:"",field2:"",field3:"",field4:"",img:null,activePanel:"addpost"});break;default:console.log(t)}console.log(t);break;default:console.log(t)}})),r.a.send("VKWebAppGetUserInfo",{})}},{key:"componentDidUpdate",value:function(){!1===this.state.isReady&&this.state.field1.length>0&&this.state.field2.length>0&&this.state.field3.length>0&&this.state.field4.length>0&&this.setState({isReady:!0}),!0===this.state.isReady&&0===this.state.field1.length&&0===this.state.field2.length&&0===this.state.field3.length&&0===this.state.field4.length&&this.setState({isReady:!1})}},{key:"render",value:function(){return l.a.createElement(p.h,{activePanel:this.state.activePanel},l.a.createElement(_,{id:"home",fetchedUser:this.state.fetchedUser,innquiryInfo:this.state,"\u0441hangeForms":this.\u0441hangeForms,go:this.go,sendForms:this.sendForms}),l.a.createElement(q,{id:"spinner",fetchedUser:this.state.fetchedUser,innquiryInfo:this.state,go:this.go}),l.a.createElement(w,{id:"addpost",fetchedUser:this.state.fetchedUser,innquiryInfo:this.state,go:this.go}))}}]),t}(l.a.Component);r.a.send("VKWebAppInit",{}),i.a.render(l.a.createElement(x,null),document.getElementById("root"))},91:function(e,t,a){e.exports=a.p+"static/media/default_img.ec5260f4.PNG"}},[[156,1,2]]]);
//# sourceMappingURL=main.6a3b38e1.chunk.js.map